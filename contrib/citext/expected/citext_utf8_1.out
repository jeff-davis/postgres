/*
 * This test must be run in a database with UTF-8 encoding
 * and a Unicode-aware locale.
 */
SELECT getdatabaseencoding() <> 'UTF8' OR
       current_setting('lc_ctype') = 'C' OR
       (SELECT datlocprovider='i' FROM pg_database
        WHERE datname=current_database())
       AS skip_test \gset
\if :skip_test
\quit
